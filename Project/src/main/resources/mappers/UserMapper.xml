<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cn.huatek.spring.mapper.UserMapper">
	
  <!--t_weeks和t_dates关联查询  -->
  <select id="finAllDate" resultType="java.util.Map">
		SELECT DISTINCT
			w.week,
			d.date 
		FROM
			t_weeks w
			JOIN t_dates d ON w.id = d.wid
  </select>
  
    <!--查询部门  -->
  <select id="finAllSection" resultType="cn.huatek.spring.entity.Section">
		SELECT DISTINCT
			id,
			sectionname 
		FROM
			t_section
			
  </select>
  
      <!--根据部门名称查询每个部门中对应的用户  -->
  <select id="finAllUserBysectionname" resultType="java.util.Map">
		SELECT
			s.sectionname,
			u.username 
		FROM
			t_section s
			JOIN t_user u ON s.id = u.pid
			where s.sectionname=#{sectionname}
			
  </select>
  
    <!--//根据用户名查询出个人一个月每天的上班时间  -->
  <select id="finAllHourByUsername" resultType="java.util.Map">
		SELECT
			s.sectionname,
			u.username,
			h.hour,
			d.date,
			w.week
		FROM
			t_section s
			JOIN t_user u ON s.id = u.pid
			JOIN t_hours h ON u.pid = h.uid
			join t_dates d on h.did=d.id
			join t_weeks w on d.wid=w.id
			where u.username='张三'
  </select>
  
</mapper>





